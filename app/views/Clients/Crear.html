<div class="main-page">
    <div class="row">
        <div class="col-lg-12 col-sm-12 col-md-12">
            <div class="panel panel-default widget-shadow">
                <div class="panel-heading text-center">
                    <p ng-if="ctrl.Client.id==null">Nuevo Cliente</p>
                    <p ng-if="ctrl.Client.id!=null && ctrl.Client.type=='Moral'">
                        {{ctrl.Client.businessname}}
                    </p>
                    <p ng-if="ctrl.Client.id!=null && ctrl.Client.type=='Fisica'">
                        {{ctrl.Client.name}} {{ctrl.Client.lastname}}
                    </p>
                </div>
                <div class="panel-body">
                    <div class="table-scroll scrollbar1">
                        <ul class="nav nav-pills nav-justified">
                            <li role="presentation" class="active">
                                <a href="#" ng-click="ctrl.menu='info'">Información</a>
                            </li>
                            <li role="presentation" ng-show="ctrl.Client.id!=null && ctrl.Client.type=='Moral'">
                                <a href="#" ng-click="ctrl.menu='manager'">Representantes</a>
                            </li>
                            <li role="presentation" ng-show="ctrl.Client.id!=null && ctrl.Client.type=='Moral'">
                                <a href="#" ng-click="ctrl.menu='shareholder'">Accionistas</a>
                            </li>
                            <li role="presentation" ng-show="ctrl.Client.id!=null">
                                <a href="#" ng-click="ctrl.menu='files'">Archivos</a>
                            </li>
                            <li role="presentation" ng-show="ctrl.Client.id!=null">
                                <a href="#" ng-click="ctrl.menu='banco'">Cuentas Bancarias</a>
                            </li>
                        </ul>
                        <br>
                        <form name="infocliente" ng-show="ctrl.menu=='info'">
                            <div class="row col-sm-12">
                                <h4 class="text-uppercase text-center">Información del Cliente:</h4>
                                <div class="form-group col-sm-2">
                                    <label for="tipo">Tipo:</label>
                                    <select name="tipo" ng-model="ctrl.Client.type" class="form-control" required>
                                        <option value="Fisica">Fisica</option>
                                        <option value="Moral">Moral</option>
                                    </select>
                                </div>
                                <div ng-show="ctrl.Client.type!=null">
                                    <div class="form-group col-sm-8" ng-if="ctrl.Client.type=='Moral'">
                                        <label for="businessname">Razón Social:</label>
                                        <input name="businessname" ng-model="ctrl.Client.businessname"
                                               class="form-control"
                                               required>
                                    </div>
                                    <div class="form-group col-sm-4" ng-if="ctrl.Client.type=='Fisica'">
                                        <label for="name">Nombre:</label>
                                        <input name="name" ng-model="ctrl.Client.name" class="form-control" required>
                                    </div>
                                    <div class="form-group col-sm-4" ng-if="ctrl.Client.type=='Fisica'">
                                        <label for="lastname">Apellido:</label>
                                        <input name="lastname" ng-model="ctrl.Client.lastname" class="form-control"
                                               required>
                                    </div>
                                    <div class="form-group col-sm-2">
                                        <label for="rfc">RFC:</label>
                                        <input name="rfc" ng-model="ctrl.Client.rfc" class="form-control" format="RFC"
                                               required>
                                    </div>
                                    <div class="form-group col-sm-3">
                                        <label for="constitutiondate">Fecha de Constitución/Nacimiento:</label>
                                        <datepicker date-format="yyyy-MM-dd" selector="form-control">
                                            <input name="constitutiondate" class="form-control"
                                                   ng-model="ctrl.Client.constitutiondate" type="date" readonly
                                                   required>
                                        </datepicker>
                                    </div>
                                    <div class="form-group col-sm-3">
                                        <label for="giro">Giro:</label>
                                        <input name="giro" ng-model="ctrl.Client.businesscategory" class="form-control"
                                               required>
                                    </div>
                                    <div class="form-group col-sm-3">
                                        <label for="numberemployes">No. Empleados:</label>
                                        <input name="numberemployes" ng-model="ctrl.Client.employeenumber"
                                               class="form-control" type="number" required>
                                    </div>
                                    <div class="form-group col-sm-3">
                                        <label for="fiel">FIEL:</label>
                                        <input name="fiel" ng-model="ctrl.Client.fiel" class="form-control"
                                               format="clabe"
                                               required>
                                    </div>
                                </div>
                            </div>
                            <div class="row col-sm-12" ng-show="ctrl.Client.type!=null">
                                <h4 class="text-uppercase text-center">Información de Contacto:</h4>
                                <div class="form-group col-sm-4">
                                    <label for="address">Calle y número:</label>
                                    <input name="address" ng-model="ctrl.Client.address" class="form-control"
                                           type="text" required>
                                </div>
                                <div class="form-group col-sm-2">
                                    <label for="colony">Colonia:</label>
                                    <input name="colony" ng-model="ctrl.Client.colony" class="form-control" type="text"
                                           required>
                                </div>
                                <div class="form-group col-sm-2">
                                    <label for="postalcode">C.P.:</label>
                                    <input name="postalcode" ng-model="ctrl.Client.postalcode" class="form-control"
                                           type="number" required>
                                </div>
                                <div class="form-group col-sm-2">
                                    <label for="city">Ciudad:</label>
                                    <input name="city" ng-model="ctrl.Client.city" class="form-control" type="text"
                                           required>
                                </div>
                                <div class="form-group col-sm-2">
                                    <label for="state">Estado:</label>
                                    <input name="state" ng-model="ctrl.Client.state" class="form-control" type="text"
                                           required>
                                </div>
                                <div class="form-group col-sm-2">
                                    <label for="email">E-Mail:</label>
                                    <input name="email" ng-model="ctrl.Client.email" class="form-control" type="email"
                                           required>
                                </div>
                                <div class="form-group col-sm-2">
                                    <label for="phone">Teléfono:</label>
                                    <input name="phone" ng-model="ctrl.Client.phone" class="form-control" type="tel"
                                           format="phone" required>
                                </div>
                                <div class="col-sm-4 btn-group" style="padding-top: 1.3%">
                                    <button class="btn btn-default" ng-if="ctrl.Client.id==null"
                                            ng-disabled="infocliente.$invalid" ng-click="ctrl.CreateClient()">
                                        Guardar
                                    </button>
                                    <button class="btn btn-default" ng-if="ctrl.Client.id!=null" ng-click="ctrl.EditClient()"
                                            ng-disabled="infocliente.$invalid">
                                        Actualizar
                                    </button>
                                </div>
                            </div>
                        </form>
                        <form name="infoshareholder" ng-show="ctrl.menu=='shareholder'" style="padding: 15px">
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th>Tipo:</th>
                                    <th ng-if="ctrl.ShareHolder.type=='Moral'">Razón Social:</th>
                                    <th ng-if="ctrl.ShareHolder.type=='Fisica'">Nombre:</th>
                                    <th ng-if="ctrl.ShareHolder.type=='Fisica'">Apellido:</th>
                                    <th>RFC:</th>
                                    <th>Participación:</th>
                                    <th>Fecha de Entrada:</th>
                                    <th></th>
                                </tr>
                                <tr>
                                    <td>
                                        <select class="form-control" ng-model="ctrl.ShareHolder.type" required>
                                            <option value="Moral">Moral</option>
                                            <option value="Fisica">Fisica</option>
                                        </select>
                                    </td>
                                    <td ng-if="ctrl.ShareHolder.type=='Moral'">
                                        <input class="form-control" ng-model="ctrl.ShareHolder.businessname" required>
                                    </td>
                                    <td ng-if="ctrl.ShareHolder.type=='Fisica'">
                                        <input class="form-control" ng-model="ctrl.ShareHolder.name" required>
                                    </td>
                                    <td ng-if="ctrl.ShareHolder.type=='Fisica'">
                                        <input class="form-control" ng-model="ctrl.ShareHolder.lastname" required>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <input class="form-control" ng-model="ctrl.ShareHolder.rfc" format="RFC"
                                                   required>
                                        </div>
                                    </td>
                                    <td>
                                        <input class="form-control" ng-model="ctrl.ShareHolder.participation"
                                               type="number" required>
                                    </td>
                                    <td>
                                        <datepicker date-format="yyyy-MM-dd" selector="form-control">
                                            <input class="form-control" ng-model="ctrl.ShareHolder.oldwork" type="date"
                                                   readonly required>
                                        </datepicker>

                                    </td>
                                    <td>
                                        <button class="btn btn-default" ng-click="ctrl.CreateShareHolder()"
                                                ng-disabled="infoshareholder.$invalid">
                                            <i class="material-icons">
                                                add
                                            </i>
                                        </button>
                                    </td>
                                </tr>
                                </thead>
                                <tbody>
                                <td colspan="7">
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th>Tipo:</th>
                                            <th>Nombre:</th>
                                            <th>Participación:</th>
                                            <th>Fecha:</th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="share in ctrl.Shareholders">
                                            <td>
                                                {{share.type}}
                                            </td>
                                            <td ng-if="share.type=='Moral'">
                                                {{share.businessname}}
                                            </td>
                                            <td ng-if="share.type=='Fisica'">
                                                {{share.name}} {{share.lastname}}
                                            </td>
                                            <td>
                                                {{share.participation}}%
                                            </td>
                                            <td>
                                                {{share.oldwork|date:'dd/MM/yyyy'}}
                                            </td>
                                            <td>
                                                <button ng-click="ctrl.deleteShareholder(share)"
                                                        class="btn btn-default">
                                                    <i class="material-icons">delete</i>
                                                </button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </td>
                                </tbody>
                            </table>
                        </form>
                        <form name="manager" ng-show="ctrl.menu=='manager'" style="padding: 15px">
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th>Nombre:</th>
                                    <th>Apellido:</th>
                                    <th>RFC:</th>
                                    <th>Teléfono:</th>
                                    <th>Identificación:</th>
                                    <th></th>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="form-control" ng-model="ctrl.Manager.name" required>
                                    </td>
                                    <td>
                                        <input class="form-control" ng-model="ctrl.Manager.lastname" required>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <input class="form-control" ng-model="ctrl.Manager.rfc" format="RFC"
                                                   required>
                                        </div>
                                    </td>
                                    <td>
                                        <input class="form-control" ng-model="ctrl.Manager.phone"
                                               format="phone" required>
                                    </td>
                                    <td>
                                        <input type="file" class="form-control" ngf-select="ctrl.SubirID($file)"/>
                                    </td>
                                    <td>
                                        <button class="btn btn-default" ng-click="ctrl.CreateManager()"
                                                ng-disabled="manager.$invalid">
                                            <i class="material-icons">
                                                add
                                            </i>
                                        </button>
                                    </td>
                                </tr>
                                </thead>
                                <tbody>
                                <td colspan="7">
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th>Nombre:</th>
                                            <th>RFC:</th>
                                            <th>Teléfono:</th>
                                            <th>Identificación:</th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="mana in ctrl.Managers">
                                            <td>
                                                {{mana.name}} {{mana.lastname}}
                                            </td>
                                            <td>
                                                {{mana.rfc}}
                                            </td>
                                            <td>
                                                {{mana.phone}}
                                            </td>
                                            <td>
                                                <button class="btn btn-default" ng-click="ctrl.downloadID(mana.idfile)">
                                                    <i class="material-icons">file_download</i>
                                                </button>
                                            </td>
                                            <td>
                                                <button ng-click="ctrl.deleteManager(mana)"
                                                        class="btn btn-default">
                                                    <i class="material-icons">delete</i>
                                                </button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </td>
                                </tbody>
                            </table>
                        </form>
                        <form name="files" ng-show="ctrl.menu=='files'" style="padding: 15px">
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th colspan="2" class="text-center"><h4>Acta Constitutiva:</h4></th>
                                </tr>
                                <tr>
                                    <th>Subir Archivo:</th>
                                    <th>
                                        <input type="file" class="form-control" ngf-select="ctrl.SubirCons($file)"/>
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="files in ctrl.filesClient | filter:{type: 'Constitutiva'}">
                                    <td>{{files.name}}</td>
                                    <td>
                                        <div class="btn-group">
                                            <button class="btn btn-default" ng-click="ctrl.downloadID(files.id)">
                                                <i class="material-icons">file_download</i>
                                            </button>
                                            <button class="btn btn-default" ng-click="ctrl.DeleteFile(files.id)">
                                                <i class="material-icons">delete</i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th colspan="2" class="text-center"><h4>Acta Asamblea:</h4></th>
                                </tr>
                                <tr>
                                    <th>Subir Archivo:</th>
                                    <th>
                                        <input type="file" class="form-control" ngf-select="ctrl.SubirAsamblea($file)"/>
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="files in ctrl.filesClient | filter:{type: 'Asamblea'}">
                                    <td>{{files.name}}</td>
                                    <td>
                                        <div class="btn-group">
                                            <button class="btn btn-default" ng-click="ctrl.downloadID(files.id)">
                                                <i class="material-icons">file_download</i>
                                            </button>
                                            <button class="btn btn-default" ng-click="ctrl.DeleteFile(files.id)">
                                                <i class="material-icons">delete</i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th colspan="2" class="text-center"><h4>Extras:</h4></th>
                                </tr>
                                <tr>
                                    <th>Subir Archivo:</th>
                                    <th>
                                        <input type="file" class="form-control" ngf-select="ctrl.SubirExtras($file)"/>
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="files in ctrl.filesClient | filter:{type: 'Extras'}">
                                    <td>{{files.name}}</td>
                                    <td>
                                        <div class="btn-group">
                                            <button class="btn btn-default" ng-click="ctrl.downloadID(files.id)">
                                                <i class="material-icons">file_download</i>
                                            </button>
                                            <button class="btn btn-default" ng-click="ctrl.DeleteFile(files.id)">
                                                <i class="material-icons">delete</i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </form>
                        <form name="bancos" ng-show="ctrl.menu=='banco'">
                            <table class="table">
                                <thead>
                                <th>Banco</th>
                                <th>Tipo de Cuenta</th>
                                <th>No. Cuenta</th>
                                <th>CLABE</th>
                                <th></th>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>
                                        <select class="form-control" ng-model="ctrl.Account.idbank" required>
                                            <option ng-repeat="bank in ctrl.banks" value="{{bank.id}}">{{bank.name}}
                                            </option>
                                        </select>
                                    </td>
                                    <td>
                                        <input class="form-control" ng-model="ctrl.Account.accounttype" required>
                                    </td>
                                    <td>
                                        <input class="form-control" ng-model="ctrl.Account.accountnumber" type="number"
                                               required>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <input class="form-control" ng-model="ctrl.Account.clabe" format="clabe"
                                                   required>
                                        </div>
                                    </td>
                                    <td>
                                        <button class="btn btn-default" ng-click="ctrl.AddAccount()"
                                                ng-disabled="bancos.$invalid">
                                            <i class="material-icons">add</i>
                                        </button>
                                    </td>
                                </tr>
                                <tr ng-repeat="account in ctrl.accounts">
                                    <td>{{account.namebank}}</td>
                                    <td>{{account.accounttype}}</td>
                                    <td>{{account.accountnumber}}</td>
                                    <td>{{account.clabe}}</td>
                                    <td>
                                        <button class="btn btn-default" ng-click="ctrl.DeleteAccount(account)">
                                            <i class="material-icons">delete</i>
                                        </button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $("ul.nav.nav-pills li").click(function (evt) {
            $("ul.nav.nav-pills li").removeClass('active')
            $(this).addClass('active')
        })
    });
</script>